<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Consumption Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0f172a" />

    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.webmanifest" />

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.png" />

    <!-- Firebase (compat CDN) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <!-- Google Fonts & Icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@400;500&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/main.css">
</head>


<body>
    <!-- Ambient Background -->
    <div class="ambient-bg">
        <div class="blob"></div>
        <div class="blob"></div>
        <div class="blob"></div>
    </div>

    <div class="shell">
        <header class="app-header">
            <div class="brand">
                <div class="brand-icon">
                    <span class="material-symbols-rounded">monitoring</span>
                </div>
                <div class="brand-text-container">
                    <div class="brand-text-main">Consumption Tracker</div>
                    <div class="brand-text-sub">A calmer way to keep score with yourself</div>
                </div>
            </div>

            <button class="header-auth-btn" id="auth-trigger-btn">
                <span class="material-symbols-rounded">person</span>
                Sign in
            </button>
        </header>

        <main class="layout">
            <!-- Left column: goal + log -->
            <section>
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">
                                <span class="material-symbols-rounded">flag</span>
                                Daily goal
                                <span id="streak-display" class="streak-display"></span>
                            </div>
                            <div class="card-subtitle">
                                Set your daily limit maximum.
                            </div>
                        </div>
                    </div>

                    <label for="goal-input">Daily limit</label>
                    <input type="number" id="goal-input" min="0" step="1" placeholder="e.g. 0, 1, 2..." />
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">
                                <span class="material-symbols-rounded">edit_note</span>
                                Log Entry
                            </div>
                            <div class="card-subtitle">
                                Record your drink count for a specific date.
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div>
                            <label for="date-input">Date</label>
                            <input type="date" id="date-input" />
                        </div>
                        <div>
                            <label for="drinks-input">Count</label>
                            <div class="input-group">
                                <input type="number" id="drinks-input" min="0" step="1" placeholder="0" />
                                <button id="quick-add-btn" class="quick-log-btn">
                                    <span class="material-symbols-rounded">add</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <button class="primary-btn" id="save-btn">
                        <span class="material-symbols-rounded">check</span>
                        <span>Save entry</span>
                    </button>

                    <div class="status empty" id="status-box">
                        <div class="status-pill"></div>
                        <div class="status-text-main">
                            <div class="status-title">No data for this date yet</div>
                            <div class="status-body">
                                Pick a day and add how much you had to see how it compares to your goal.
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Daily Inspiration -->
                <div class="card daily-inspiration">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="material-symbols-rounded">format_quote</span>
                            Daily Inspiration
                        </div>
                    </div>
                    <div id="quote-text" class="quote-text">
                        "The journey of a thousand miles begins with a single step."
                    </div>
                    <div id="quote-author" class="quote-author">
                        - Lao Tzu
                    </div>
                </div>
            </section>

            <!-- Right column: calendar + history -->
            <section>
                <!-- Weekly Insights -->
                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">
                                <span class="material-symbols-rounded">insights</span>
                                Weekly Insights
                            </div>
                        </div>
                    </div>
                    <div class="weekly-stats-container">
                        <div>
                            <div class="weekly-stat-label">Total</div>
                            <div id="weekly-total" class="weekly-stat-value total">-</div>
                        </div>
                        <div>
                            <div class="weekly-stat-label">Daily Avg</div>
                            <div id="weekly-avg" class="weekly-stat-value average">-</div>
                        </div>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="material-symbols-rounded">emoji_events</span>
                            Achievements
                        </div>
                    </div>
                    <div class="badge-grid" id="badge-grid">
                        <!-- 1 Day -->
                        <div class="badge" id="badge-1">
                            <span class="material-symbols-rounded badge-icon">star</span>
                            <span class="badge-label">1 Day</span>
                        </div>
                        <!-- 3 Days -->
                        <div class="badge" id="badge-3">
                            <span class="material-symbols-rounded badge-icon">local_fire_department</span>
                            <span class="badge-label">3 Days</span>
                        </div>
                        <!-- 7 Days -->
                        <div class="badge" id="badge-7">
                            <span class="material-symbols-rounded badge-icon">workspace_premium</span>
                            <span class="badge-label">1 Week</span>
                        </div>
                        <!-- 14 Days -->
                        <div class="badge" id="badge-14">
                            <span class="material-symbols-rounded badge-icon">military_tech</span>
                            <span class="badge-label">2 Weeks</span>
                        </div>
                        <!-- 30 Days -->
                        <div class="badge" id="badge-30">
                            <span class="material-symbols-rounded badge-icon">trophy</span>
                            <span class="badge-label">1 Month</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">
                                <span class="material-symbols-rounded">bar_chart</span>
                                Trends
                            </div>
                            <div class="card-subtitle">Last 14 days</div>
                        </div>
                    </div>
                    <div class="trends-chart-container">
                        <canvas id="trends-chart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">
                                <span class="material-symbols-rounded">calendar_month</span>
                                Calendar
                            </div>
                            <div class="card-subtitle">Your month at a glance.</div>
                        </div>
                    </div>
                    <div class="calendar" id="calendar"></div>

                    <div class="calendar-legend">
                        <div class="calendar-legend-item">
                            <span class="legend-dot under"></span> Under
                        </div>
                        <div class="calendar-legend-item">
                            <span class="legend-dot equal"></span> Equal
                        </div>
                        <div class="calendar-legend-item">
                            <span class="legend-dot over"></span> Over
                        </div>
                        <div class="calendar-legend-item">
                            <span class="legend-dot no-data"></span> No Data
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div>
                            <div class="card-title">
                                <span class="material-symbols-rounded">history</span>
                                Recent history
                            </div>
                        </div>
                    </div>
                    <ul class="history-list" id="history-list"></ul>
                </div>
                <!-- Footer -->
                <!-- Footer -->
                <footer>
                    <a href="privacy.html">Privacy Policy</a>
                    <a href="status.html">System Status</a>
                    <a href="#" id="export-btn">Export Data</a>
                </footer>
        </main>
    </div>

    <!-- Auth overlay -->
    <div class="auth-overlay" id="auth-overlay">
        <div class="auth-modal">
            <div class="auth-modal-header">
                <div>
                    <div class="auth-modal-title" id="auth-modal-title">Sign in</div>
                    <div class="auth-modal-subtitle" id="auth-modal-subtitle">
                        Use email and password to sync your data across devices.
                    </div>
                </div>
                <button class="auth-close-btn" id="auth-close-btn">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>

            <div id="auth-modal-logged-out">
                <div class="auth-row">
                    <div>
                        <label for="auth-email">Email</label>
                        <input type="email" id="auth-email" placeholder="you@example.com" autocomplete="email" />
                    </div>
                </div>
                <div class="auth-row">
                    <div>
                        <label for="auth-password">Password</label>
                        <input type="password" id="auth-password" placeholder="Minimum 6 characters"
                            autocomplete="current-password" />
                    </div>
                </div>
                <div class="auth-actions">
                    <button class="secondary-btn" id="auth-signin-btn">Sign in</button>
                    <button class="primary-btn compact" id="auth-signup-btn">Sign up</button>
                </div>
                <div class="auth-status-text">
                    You can always use the tracker without an account â€” everything stays on this device unless you
                    sign
                    in.
                </div>
                <div class="auth-status-text">
                    <button class="link-btn" id="auth-forgot-btn">Forgot your password?</button>
                </div>
                <div class="auth-error" id="auth-error"></div>
            </div>

            <div id="auth-modal-logged-in" style="display: none;">
                <div class="auth-status-text">
                    Signed in as <strong id="auth-user-email"></strong><br />
                    Cloud sync is enabled. Changes are saved locally and to your account.
                </div>
                <div class="auth-actions">
                    <button class="secondary-btn" id="auth-signout-btn">Sign out</button>
                </div>
                <div class="auth-error" id="auth-error-loggedin"></div>
            </div>
        </div>
    </div>

    <!-- Your private config (not checked into git) -->
    <script src="config.js"></script>
    <!-- Main app logic -->
    <script type="module" src="js/app.js"></script>
</body>

</html>